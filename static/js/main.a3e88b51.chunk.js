(this.webpackJsonplab3=this.webpackJsonplab3||[]).push([[0],{47:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},63:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n(37),a=n.n(c),i=(n(55),n(56),n(57),n(2)),o=n(4),s="toggleTaskCompletion",u="toggleTodoList",l="toggleCompletedList",d="showMenu",f="hideMenu",p="undoTask",b="showUndo",j="hideUndo",h="updateTasks",v="updateSortingFields",x="toggleSortFieldMenu",O="hideSortFieldMenu",k=n(49),m=n(16),g=n(79);function y(e,t){for(var n=0;n<e.length;n++){var r=e[n],c=S(r);if(0==n)w(t,c,r);else{var a=e[n-1];C(a,S(a),r,t,c)}}return t.map((function(e){return e}))}function w(e,t,n){e.sort((function(e,r){return t(e,r,n.isAscending)}))}function C(e,t,n,r,c){r.sort((function(r,a){if(function(e,t,n,r){return 0==t(n,r,e.isAscending)}(e,t,r,a))return c(r,a,n.isAscending)}))}function S(e){var t=e.field;e.isAscending;switch(console.log(t),t){case"name":return T;case"time":return A;case"priority":return F;default:return}}function T(e,t,n){var r=e.text.localeCompare(t.text);return n?r:-1*r}function F(e,t,n){var r=e.priority-t.priority;return n?-1*r:r}function A(e,t,n){var r=e.creationDate-t.creationDate;return n?r:-1*r}var M={tasks:[],stack:[],sortingFields:[],showUndo:!1,showCompleted:!1,showTodo:!0,showMenu:!1,showSortMenu:!1};function I(e,t){var n=e.tasks.map((function(e){return e})),r=n.find((function(e){return e.id===t}));return r.isCompleted=!r.isCompleted,Object(m.a)(Object(m.a)({},e),{},{tasks:n})}function D(e){var t=e.stack.map((function(e){return e}));return Object(m.a)(Object(m.a)({},e),{},{tasks:t.pop(),stack:t})}function N(e){return Object(m.a)(Object(m.a)({},e),{},{showCompleted:!e.showCompleted})}function U(e){return Object(m.a)(Object(m.a)({},e),{},{showTodo:!e.showTodo})}function _(e){return Object(m.a)(Object(m.a)({},e),{},{showMenu:!0})}function L(e){return Object(m.a)(Object(m.a)({},e),{},{showMenu:!1})}function B(e){return Object(m.a)(Object(m.a)({},e),{},{showUndo:!0})}function E(e){return Object(m.a)(Object(m.a)({},e),{},{showUndo:!1})}function z(e,t){console.log(t);var n=y(e.sortingFields,t);return Object(m.a)(Object(m.a)({},e),{},{tasks:n})}function X(e,t){var n=t.sortingFields,r=y(n,e.tasks);return console.log("I am updating",n),Object(m.a)(Object(m.a)({},e),{},{tasks:r,sortingFields:n})}function J(e){return Object(m.a)(Object(m.a)({},e),{},{showSortMenu:!1})}function R(e){return Object(m.a)(Object(m.a)({},e),{},{showSortMenu:!e.showSortMenu})}var H=Object(k.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return I(e,t.payload.id);case u:return U(e);case l:return N(e);case d:return _(e);case f:return L(e);case p:return D(e);case b:return B(e);case j:return E(e);case h:return z(e,t.payload.tasks);case v:return X(e,t.payload);case x:return R(e);case O:return J(e);default:return e}})),K=H,P=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"toggleTodoList",value:function(){var e={type:u};K.dispatch(e)}},{key:"showSortMenu",value:function(){return K.getState().showSortMenu}},{key:"hideSortMenu",value:function(){var e={type:O};K.dispatch(e)}},{key:"toggleSortFieldMenu",value:function(){var e={type:x};K.dispatch(e)}},{key:"showToDo",value:function(){return K.getState().showTodo}},{key:"showCompleted",value:function(){return K.getState().showCompleted}},{key:"showMenu",value:function(){var e={type:d};K.dispatch(e)}},{key:"closeMenu",value:function(){var e={type:f};K.dispatch(e)}},{key:"menuIsActive",value:function(){return K.getState().showMenu}},{key:"toggleCompletedList",value:function(){var e={type:l};K.dispatch(e)}},{key:"showUndo",value:function(){var e={type:b};K.dispatch(e)}},{key:"hideUndo",value:function(){var e={type:j};K.dispatch(e)}},{key:"undoTask",value:function(){var e={type:p};K.dispatch(e)}},{key:"undoIsActive",value:function(){return K.getState().showUndo}}]),e}(),Q=(n(47),n(30)),V=n(28),W=n(10);function q(){P.showMenu()}function G(){return Object(W.jsx)("button",{class:"action-button",onClick:q,children:Object(W.jsx)(Q.a,{icon:V.e})})}n(63);function Y(e){return Object(W.jsx)("div",{class:"banner",children:Object(W.jsx)("h1",{class:"title",children:" Todoiz.IO"})})}var Z=n(29),$=n(6),ee=n(0),te=n.n(ee),ne=n(3),re=n(46);re.a.initializeApp({apiKey:"AIzaSyCcQ6XCOvMIA7pHME4bWBgy_7OVy_7XErA",authDomain:"cs124-fall2021.firebaseapp.com",projectId:"cs124-fall2021",storageBucket:"cs124-fall2021.appspot.com",messagingSenderId:"264318304667",appId:"1:264318304667:web:4be8d27a02811b1ccd613e"});var ce=re.a.firestore(),ae="todoiz.io",ie="default",oe="tasks",se=ce.collection(ae);function ue(e){return se.doc(ie).collection(oe).doc(e)}var le=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"updateTaskText",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t);case 2:return r=e.sent,e.next=5,r.update({text:n});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toggleTaskCompletion",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r,c,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ue(t),e.next=3,n.get();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:return c=r.data(),a=c.isCompleted,e.next=9,n.update({isCompleted:!a});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createTask",value:function(){var e=Object(g.a)();se.doc(ie).collection(oe).doc(e).set({isCompleted:!1,text:"",id:e,priority:-1,creationDate:Date.now()})}},{key:"deleteTask",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n.delete();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAllCompleted",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.doc(ie).collection(oe).where("isCompleted","==",!0).get();case 2:t=e.sent,n=Object($.a)(t.docs),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=12;break}return c=r.value,e.next=10,c.ref.delete();case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"todo",value:function(){return K.getState().tasks.filter((function(e){return!1===e.isCompleted}))}},{key:"completed",value:function(){return K.getState().tasks.filter((function(e){return!0===e.isCompleted}))}}]),e}(),de=le;n(69);function fe(e){var t="task-item ".concat(e.isCompleted?"completed":"");return Object(W.jsxs)("div",{class:t,children:[Object(W.jsx)("input",{alt:"task completion status",class:"checkbox",type:"checkbox",value:e.isCompleted,onChange:function(t){return n=e.id,void de.toggleTaskCompletion(n);var n},checked:e.isCompleted}),Object(W.jsx)("input",{class:"task-text",type:"text",alt:"task text",onChange:function(t){return function(e,t){var n=t.currentTarget.value;de.updateTaskText(e,n)}(e.id,t)},value:e.text})]})}n(70);function pe(e){return Object(W.jsx)("div",{class:"container scroll-container",children:e.tasks.map((function(e){return Object(r.createElement)(fe,Object(m.a)(Object(m.a)({},e),{},{key:e.id}))}))})}n(71),n(72),n(73);var be=Object(Z.b)((function(e,t){return{isOpen:t.isToDo?P.showToDo():P.showCompleted()}}))((function(e){var t=e.isOpen?V.a:V.b;return Object(W.jsx)("button",{class:"drop-down",onClick:function(t){e.isToDo?P.toggleTodoList():P.toggleCompletedList()},children:Object(W.jsx)(Q.a,{icon:t})})}));n(74);function je(){P.toggleSortFieldMenu()}function he(e){return Object(W.jsxs)("button",{className:"sort-button",onClick:je,children:[" ",Object(W.jsx)(Q.a,{icon:V.c})," "]})}function ve(e){var t="bar ".concat(e.className);return Object(W.jsxs)("div",{class:t,children:[Object(W.jsx)(be,{isToDo:"todo-bar"===e.className}),Object(W.jsxs)("h1",{class:"bar-title",children:[" ",e.sectionTitle," "]}),Object(W.jsx)(he,{})]})}var xe=Object(Z.b)((function(e,t){return"To Do"===t.sectionTitle?{tasks:de.todo(),showContainer:P.showToDo()}:{tasks:de.completed(),showContainer:P.showCompleted()}}))((function(e){return Object(W.jsxs)("div",{children:[Object(W.jsx)(ve,{sectionTitle:e.sectionTitle,className:e.className}),e.showContainer&&Object(W.jsx)(pe,{tasks:e.tasks})]})}));function Oe(e){return Object(W.jsxs)("button",{onClick:function(){return e.command()},class:"action-item",children:[e.icon&&Object(W.jsx)(Q.a,{icon:e.icon}),Object(W.jsx)("div",{class:"action-text",children:Object(W.jsxs)("p",{children:[" ",e.text," "]})})]})}n(75);var ke=[{text:"Add Task",command:de.createTask,icon:V.e},{text:"Clear Completed Tasks",command:function(){de.deleteAllCompleted(),P.showUndo(),setTimeout((function(){P.hideUndo()}),3e3)},icon:V.d}];function me(e){return Object(W.jsx)("div",{class:"overlay",onClick:P.closeMenu,children:Object(W.jsx)("div",{class:"action-container",children:ke.map((function(e){return Object(r.createElement)(Oe,Object(m.a)(Object(m.a)({},e),{},{key:e.text}))}))})})}function ge(){P.undoTask(),P.hideUndo()}function ye(){return Object(W.jsxs)("div",{class:"undo",children:[Object(W.jsx)("p",{children:" Completed tasks cleared"}),Object(W.jsx)("button",{alt:"undo task clear",onClick:ge,children:" Undo "})]})}n(76);var we=ce.collection(ae),Ce=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"addSortField",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!De(t,r)){e.next=9;break}return e.abrupt("return");case 9:Ne(r,t,n);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeSortField",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:if(r=e.sent,c=r.find((function(e){return e.field==t}))){e.next=6;break}return e.abrupt("return");case 6:return c.field=n,e.next=9,Ae(r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"changeAscending",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var r,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),e.next=3,Te();case 3:if(r=e.sent,c=r.find((function(e){return e.field==t}))){e.next=7;break}return e.abrupt("return");case 7:return c.isAscending=n,e.next=10,Ae(r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addRandomField",value:function(){var t=Object(ne.a)(te.a.mark((function t(){var n,r,c,a;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:if(r=!!n.find((function(e){return"name"==e.field})),c=!!n.find((function(e){return"time"==e.field})),a=!!n.find((function(e){return"priority"==e.field})),console.log(n),r){t.next=14;break}return t.next=12,e.addSortField("name",!0);case 12:case 17:t.next=22;break;case 14:if(c){t.next=19;break}return t.next=17,e.addSortField("time",!0);case 19:if(a){t.next=22;break}return t.next=22,e.addSortField("priority",!0);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"removeSortField",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:if(n=e.sent,Se(),n){e.next=6;break}return e.abrupt("return");case 6:return r=n.filter((function(e){return e.field!==t})),e.next=9,Ae(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeSortFieldOrder",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n){var r,c,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:if(!(!(r=e.sent)||n<0||n>=r.length)){e.next=5;break}return e.abrupt("return");case 5:if(-1!=(c=Ie(t,r))){e.next=8;break}return e.abrupt("return");case 8:return a=r.splice(c,1),r.splice(n,0,a[0]),e.next=12,Ae(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Se(){return we.doc(ie)}function Te(){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se().get();case 2:return t=e.sent,e.abrupt("return",t?t.data().sortingFields:null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Se(),e.next=3,n.update({sortingFields:t});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){for(var n=0;n<t.length;n++){if(t[n].field==e)return n}return-1}function De(e,t){return!!t.find((function(t){return t.field==e}))}function Ne(e,t,n){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(ne.a)(te.a.mark((function e(t,n,r){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Se(),t.push({field:n,isAscending:r}),e.next=4,Ae(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return Le.apply(this,arguments)}function Le(){return(Le=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.addRandomField();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Object(W.jsx)("button",{onClick:_e,className:"sortButton",children:Object(W.jsx)("h3",{children:"  + Filter "})})}function Ee(){P.hideSortMenu()}function ze(e){return Object(W.jsx)("button",{className:"sort-button",onClick:Ee,children:Object(W.jsx)("h3",{children:" x "})})}function Xe(){return(Xe=Object(ne.a)(te.a.mark((function e(t,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,Ce.changeSortFieldOrder(t,n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Je=Object(Z.b)((function(e){return{sortingFields:e.sortingFields}}))((function(e){return Object(W.jsxs)("div",{children:[Object(W.jsx)("label",{children:" Order "}),Object(W.jsx)("select",{onChange:function(t){return function(e,t){return Xe.apply(this,arguments)}(e.field,parseInt(t.currentTarget.value))},value:e.index,children:e.sortingFields.map((function(e,t){return Object(W.jsxs)("option",{value:t,children:[" ",t+1," "]},t)}))})]})}));function Re(e){return Object(W.jsxs)("div",{children:[Object(W.jsx)("label",{children:" By "}),Object(W.jsxs)("select",{onChange:function(t){return function(e,t){Ce.changeSortField(e,t.currentTarget.value)}(e.field,t)},value:e.field,children:[Object(W.jsx)("option",{value:"name",children:" Name "}),Object(W.jsx)("option",{value:"time",children:" Creation Date"}),Object(W.jsx)("option",{value:"priority",children:" Priority "})]})]})}function He(){return(He=Object(ne.a)(te.a.mark((function e(t,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.changeAscending(t,!n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return Object(W.jsxs)("div",{children:[Object(W.jsx)("label",{children:" isAscending "}),Object(W.jsx)("input",{type:"checkbox",value:e.isAscending,checked:e.isAscending,onChange:function(){return function(e,t){return He.apply(this,arguments)}(e.field,e.isAscending)}})]})}function Pe(e){return Object(W.jsx)("button",{onClick:function(){return t=e.field,void Ce.removeSortField(t);var t},children:Object(W.jsx)("span",{children:" X "})})}n(77);function Qe(e){return Object(W.jsxs)("div",{className:"entry-container",children:[Object(W.jsx)(Je,{field:e.field,index:e.index}),Object(W.jsx)(Re,{field:e.field}),Object(W.jsx)(Ke,{isAscending:e.isAscending,field:e.field}),Object(W.jsx)(Pe,{field:e.field})]})}var Ve=Object(Z.b)((function(e){return{sortingFields:e.sortingFields}}))((function(e){return Object(W.jsxs)("div",{className:"sort-container",children:[Object(W.jsxs)("div",{className:"sort-bar",children:[Object(W.jsx)("h2",{children:" Filter"}),Object(W.jsxs)("div",{className:"sort-section",children:[Object(W.jsx)(Be,{}),Object(W.jsx)(ze,{})]})]}),Object(W.jsx)("div",{class:"field-container",children:e.sortingFields.map((function(e,t){return Object(W.jsx)(Qe,Object(m.a)({index:t},e),t)}))})]})}));var We=Object(Z.b)((function(e){return{menuIsActive:P.menuIsActive(),showUndo:P.undoIsActive(),showSortMenu:P.showSortMenu()}}))((function(e){var t=e.menuIsActive,n=e.showUndo,r=e.showSortMenu;return Object(W.jsxs)("div",{class:"container",children:[Object(W.jsx)(Y,{}),Object(W.jsx)(xe,{className:"todo-bar",sectionTitle:"To Do"}),Object(W.jsx)(xe,{className:"completed-bar",sectionTitle:"Completed"}),t&&Object(W.jsx)(me,{}),Object(W.jsx)(G,{}),n&&Object(W.jsx)(ye,{}),r&&Object(W.jsx)(Ve,{})]})})),qe=new(function(){function e(){Object(i.a)(this,e),this._db=ce,this._taskSubscription=null,this._sortSubscrption=null}return Object(o.a)(e,[{key:"setTaskSubscription",value:function(e){this._taskSubscription=e.onSnapshot((function(e){var t=function(e){return{type:h,payload:{tasks:e}}}(e.docs.map((function(e){return e.data()})));K.dispatch(t)}))}},{key:"setSortSubscription",value:function(e){this._sortSubscrption=e.onSnapshot((function(e){var t=e.data().sortingFields;console.log(t);var n=function(e){return{type:v,payload:{sortingFields:e}}}(t);K.dispatch(n)}))}}]),e}()),Ge=ce.collection(ae),Ye=Ge.doc(ie).collection("tasks"),Ze=Ge.doc(ie);qe.setTaskSubscription(Ye),qe.setSortSubscription(Ze),a.a.render(Object(W.jsx)(Z.a,{store:K,children:Object(W.jsx)(We,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.a3e88b51.chunk.js.map